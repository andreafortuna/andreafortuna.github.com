<div class="separator" style="clear: both; text-align: center;"><a href="http://andreafortuna.files.wordpress.com/2008/10/bloggersync.png" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img alt="" class="alignright size-thumbnail wp-image-1174" height="79" src="http://andreafortuna.files.wordpress.com/2008/10/bloggersync.png?w=128" title="bloggersync" width="200" /></a></div>Nel <a href="http://www.andreafortuna.org/2008/10/vbnet-inserire-un-post-su-blogspot_20.html">precedente articolo</a> spiegavo come utilizzare le Google Blogger Data Api per pubblicare post sulla piattaforma di blogging di google.<br /><br />Lo studio di tali API aveva come obiettivo la realizzazione di un piccolo tool per la pubblicazione automatica su Blogspot da blogs ospitati su piattaforme differenti: per dirla semplice, "<em>ho un blog su wordpress.com, lo voglio 'migrare' su blogspot e magari tenere aggiornata questo 'mirror', come fare senza utilizzare plugin aggiuntivi?</em> (che, tra le altre cose, wordpress.com non permette di installare)".<br />Ho realizzato quindi una prima bozza di applicazione (in VB.NET) che si occupasse di scorrere un Feed RSS e pubblicare in maniera automatica quanto letto su un blog ospitato su <a href="http://www.blogger.com/">Blogger</a>, tenendo naturalmente conto di quando già pubblicato.<br /><br />Successivamente ad una prima versione in VB.NET, ho effettuato la conversione in Python, garantendomi la compatibilità con Linux e Mac senza ricorrere all'utilizzo di <a href="http://www.mono-project.com/Main_Page">Mono</a>.<br />L'idea di trasformare il tutto in una WebApp mi frullava per la testa (sarebbe stato bello rendere il tutto fruibile anche da iPhone e dispositivi simili): <a href="http://appengine.google.com/">Google App Engine</a> mi è venuto in aiuto.<br /><br />Basata interamente su Python, la piattaforma di 'application hosting' fornita da Google mi permetteva di riutilizzare quanto già scritto senza grosse modifiche e, 'giocando in casa', mi permetteva di utilizzare il sistema di autenticazione interno per <a href="http://code.google.com/apis/blogger/developers_guide_python.html#Authenticating">passare le credenziali a Blogspot</a>.<br /><br />Prendiamo ora in considerazione la stessa <a href="http://andreafortuna.wordpress.com/2008/10/20/vbnet-inserire-un-post-su-blogspot-utilizzando-le-google-blogger-data-api/">funzione da me realizzata in VB.NET</a>, convertita per funzionare sul Google App Engine:<br /><br /><script src="https://gist.github.com/andreafortuna/b15bcd12e5664d04e22f.js"></script> l'unica differenza con la precedente è il metodo utilizzato per controllare la presenza o meno del post che si sta per pubblicare.<br />Nella versione in VB effettuavo una query su Blogger, scorrendo tutti i post e confrontandone il titolo con quanto stavo per pubblicare.<br /><br />Sull'App Engine mi sono quasi subito scontrato con le limitazioni di quota: se un processo utilizza troppi cicli di CPU, l'applicazione viene momentaneamente 'bloccata'.<br />Cosa che accadeva continuamente, essendo il vecchio metodo di controllo non proprio parco nell'uso della CPU.<br /><br />Per risolvere il problema mi sono appoggiato sul <a href="http://code.google.com/appengine/docs/datastore/">DataStore</a> interno all'AppEngine: ogni post inserito viene archiviato, in modo che un successivo ciclo di sincronizzazione escluda automaticamente quanto già pubblicato senza dover andarselo a cercare accedendo a Blogger.<br /><br />La primissima beta della WebApp la trovate all'indirizzo <a href="http://bloggersync.appspot.com/">http://bloggersync.appspot.com</a>.<br /><br /><a href="http://andreafortuna.files.wordpress.com/2008/10/bloggersync1.png" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img alt="" class="alignleft size-thumbnail wp-image-1171" height="82" src="http://andreafortuna.files.wordpress.com/2008/10/bloggersync1.png?w=128" title="bloggersync1" width="200" /></a>L'utilizzo è estremamente semplice: una volta effettuato il login con il vostro account di Google e autorizzato BloggerSync ad accedere ai dati di Blogger, verrà visualizzata una scarna pagina contenente i titoli dei blog legati all'account, con accanto un campo di testo da compilare con il Feed Rss scelto come 'fonte' per la pubblicazione.<br /><br /><a href="http://andreafortuna.files.wordpress.com/2008/10/immagine-1.png" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img alt="" class="alignright size-thumbnail wp-image-1172" height="91" src="http://andreafortuna.files.wordpress.com/2008/10/immagine-1.png?w=128" title="immagine-1" width="200" /></a>Con la pressione del pulsante "Pubblica da RSS" si da il via alla procedura di copia dei contenuti, che si conclude con un report di quanto pubblicato (in quanto nuovo) e quanto già presente e quindi non aggiunto. Il feed inserito viene salvato e riproposto al successivo accesso.<br /><br />L'applicazione è ancora immatura, devo occuparmi di risolvere ancora parecchi bugs (come un fastidioso timeout quando viene effettuata primissima operazione di copia), quindi utilizzatela 'as-is' e a vostro rischio e pericolo.<br /><br />Un'ultima nota: leggendo queste righe, molti avranno pensato "<em>simpatico questo, rilascia questo tool e ora sai quanti si divertiranno a copiare i blog altrui!</em>". Per arginare almeno in parte il problema, l'applicazione si prende la briga di aggiungere in coda a ogni post pubblicato un link ben evidente alla fonte. :-)