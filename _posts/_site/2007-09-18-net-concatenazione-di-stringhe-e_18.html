Talvolta può capitare di dover realizzare, all'interno di una applicazione scritta utilizzando il framework .NET, numerose concatenazioni di stringhe.<br/><br/>Leggendo un trafiletto su IoProgrammo di questo mese ho avuto il 'la' per questa breve riflessione, che ha trovato riscontro anche in questo articolo su <a href="http://www.dotnetside.org/blogs/tips/archive/2006/06/05/StringBuilder-vs-Concatenamento.aspx">DotNetSide</a>.<br/>Prendiamo ad esempio questo breve listato:<br/><blockquote><font face="Verdana" size="2"><span><span>1 </span> <span>string </span><span>myString = </span><span>string</span><span>.Empty;<br/><span>2 </span> </span><span>for </span><span>(</span><span>int </span><span>i = 0; i &lt; 10000; i++) {<br/><span>3 </span>     myString += i.ToString();<br/><span>4 </span> }</span></span></font></blockquote><br/>La contenazione della stringa viene ripetuta per 10000 volte utilizzando il semplice operatore "+".<br/>Le prestazioni sono estremamente basse: come si può leggere nell'articolo, questo breve listato viene eseguito in più di mezzo secondo (un'infinità!).<br/><br/>Analizziamo ora quest'altro frammento di codice:<br/><blockquote><font face="Verdana" size="2"><span>1 </span> <span>StringBuilder sb = </span><span>new </span><span>StringBuilder();<br/><span>2 </span> </span><span>for </span><span>(</span><span>int </span><span>i = 0; i &lt; 10000; i++) {<br/><span>3 </span>     sb.Append(i.ToString());<br/><span>4 </span> }</span></font></blockquote><br/>In questo caso, al posto del semplice oggetto <em>string</em> viene utilizzata la classe <em>StringBuilder</em>.<br/>Si tratta di uno oggetto sviluppato appositamente per la concatenazione delle stringhe; da <a href="http://msdn2.microsoft.com/it-it/library/system.text.stringbuilder(VS.80).aspx">MSDN</a>:<br/><blockquote><a title="remarksToggle" name="remarksToggle"></a>Questa classe rappresenta un oggetto simile a una stringa il cui valore è una sequenza mutabile di caratteri. Il valore viene considerato mutabile perché può essere modificato dopo essere stato creato aggiungendo, rimuovendo, sostituendo o inserendo dei caratteri</blockquote><br/>Qual'è la differenza, in definitiva?<br/>utilizzando una normale stringa in accoppiata con l'operatore "+", ogni qualvolta viene effettuata una concatenazione viene allocato in memoria uno spazio pari alla somma dei componenti che vengono concatenati, spazio nel quale viene poi effettuata la 'somma' dei due componenti.<br/>A ogni ciclo viene quindi   creata una nuova stringa destinata poi a generare nuovo lavoro per il Garbage Collector, incaricato di 'smaltirla'.<br/><br/>L'oggetto StringBuilder contiene invece un vettore di caratteri e, a ogni chiamata del metodo <em>Append() </em>vengono concatenati nuovi elementi senza creare inutilmente nuovi oggetti.<br/><br/>In questo modo lo stesso ciclo di 10000 iterazioni viene eseguito quasi 50 volte piu' velocemente.