<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-DDq1GtiS_Ao/USCv45JHb_I/AAAAAAAAEX4/dQ_eXRfrIGg/s1600/r2-700c.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-DDq1GtiS_Ao/USCv45JHb_I/AAAAAAAAEX4/dQ_eXRfrIGg/s200/r2-700c.jpg" width="188" /></a></div>Ritorno sull'<a href="http://oldsite.andreafortuna.org/2013/02/minilab-konica-minolta-r2-super-700.html" target="_blank">argomento trattato qualche mese fa</a>: il <a href="http://oldsite.andreafortuna.org/search/label/Konica%20Minolta%20R2%20Super%20700" target="_blank">Minilab&nbsp;Konica Minolta</a> al quale avevo risolto il problema del disco pieno sulla macchina linux che si occupa di gestire i processi di stampa.<br /><br />Questa volta vengo chiamato per intervenire sulla macchina Windows XP (embedded) che gestisce le procedure di acquisizione e ottimizzazione delle immagini: un vecchio Pentium 4 con 2 Gb di ram e un disco SATA estraibile diviso in 2 partizioni (una per il S.O. e una per i dati). Perchè ci tengo a precisare la presenza di 2 partizioni? Lo scoprirete tra poco...<br /><br />A quanto pare una cliente aveva portato del materiale da stampare utilizzando una chiavetta: sulla macchina windows che si sarebbe dovuta occupare dell'acquisizione l'assistenza Minolta non ha avuto la premusa di installare un antivirus, quindi <i>inaspettatamente</i>&nbsp;il sistema in questione di blocca e mette <i>in ginocchio</i>&nbsp;il laboratorio.<br /><br /><a name='more'></a><br /><br /><h3>Al lavoro!</h3><br />A questo punto mi organizzo: preparo una chiavetta con <a href="http://portableapps.com/apps/security/clamwin_portable" target="_blank">ClamWin Portable</a> aggiornato con le ultime definizioni e una copia di <a href="http://www.runtime.org/driveimage-xml.htm" target="_blank">DriveImage XML</a> e mi metto al lavoro.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-gqs7kXXSYDg/UbXbezwkRTI/AAAAAAAAFQk/4TE8Sp7U1gs/s1600/IMG_0182.JPG" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="150" src="http://4.bp.blogspot.com/-gqs7kXXSYDg/UbXbezwkRTI/AAAAAAAAFQk/4TE8Sp7U1gs/s200/IMG_0182.JPG" width="200" /></a></div>Già dai primi secondi di scan, ClamWin rileva la presenza di una <i>vecchia</i>&nbsp;conoscenza: il worm Kido, meglio conosciuto come <b>Conficker</b>.<br /><br />Come confermato anche da <a href="http://it.wikipedia.org/wiki/Conficker" target="_blank">Wikipedia</a>, il worm in questione è stato scoperto nel 2009 ma miete ancora vittime! :-)<br /><br />Trovo la stessa situazione anche sugli altri dischi 'gemelli': dimenticavo infatti di dire che, per evitare interruzioni di servizio, il proprietario del minilab ha avuto la giusta idea di farsi clonare il disco del sistema windows su altri 2 drive, da usare come sostituti in caso di corruzione di quello attualmente in uso.<br /><br />Purtroppo, una volta <i>infettato</i>&nbsp;il disco principale, non capendo di cosa si trattasse, ha sostituito il disco con il <i>gemello</i>&nbsp;e tentata nuovamente l'importazione delle immagini, permettendo a <b>Conficker </b>di insidiarsi anche nel secondo disco. Procedura ovviamente ripetuta anche con il <i>terzo</i>&nbsp;supporto. :-D<br /><br />A disinfestazione terminata facciamo la conta dei danni: solo un disco sembra funzionare correttamente, uno non si avvia, e uno va in <a href="http://it.wikipedia.org/wiki/Schermata_blu_di_errore" target="_blank">BSOD</a> subito dopo lo startup.<br /><div class="separator" style="clear: both; text-align: center;"></div><br /><a href="http://4.bp.blogspot.com/--wF3NZk402A/UbXiSrhkHcI/AAAAAAAAFQ8/8Bi3_uTCvOI/s1600/IMG_0184.JPG" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="150" src="http://4.bp.blogspot.com/--wF3NZk402A/UbXiSrhkHcI/AAAAAAAAFQ8/8Bi3_uTCvOI/s200/IMG_0184.JPG" width="200" /></a>Taglio la testa al toro, monto il disco superstite su un bay <i>SATA</i>, salvo un'immagine usando <i>DriveImage XML</i> e la riverso sulla prima partizione dei dischi non funzionanti.<br /><br />Avvio la macchina con ognuno dei 3 dischi e ne verifico il funzionamento.<br />Si avviano correttamente ma solo uno presenta ancora un problema: non ne vuole sapere di avviare la procedura di acquisizione delle immagini da pellicola o da supporti esterni.<br /><br /><h3>Un comportamento inaspettato...</h3>La cosa è singolare, trattandosi di una copia speculare degli altri supporti: mi concentro quindi sulla seconda partizione, che contiene un'unica directory chiamata <i>Storage</i>&nbsp;e noto che&nbsp;ha solamente pochi MB liberi.<br />Il software di gestione, a quanto pare, non restituisce alcum messaggio di errore a riguardo, semplicemente smette di acquisire nuovi media se lo spazio disponibile sulla seconda partizione è in esaurimento.<br /><br />Una rapida pulizia e anche il terzo disco ricomincia a funzionare.<br /><br /><h3>Magari può essere utile a qualche lettore!</h3>Non so quanti possano essere ancora gli utilizzatori di questo modello di MiniLab, ma spero che la condivisione di queste esperienze possa ritornare utile a qualcuno.<br /><br />Ho mantenuto inoltre una copia dell'immagine utilizzata per clonare i dischi: trattandosi di oltre 8GB evito di metterla online ma se qualcuno ne avesse bisogno non deve fare altro che contattarmi.