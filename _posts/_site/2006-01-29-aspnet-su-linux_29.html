<table border="0"><tr><td><p>Ormai il progetto <a target="_blank" href="http://www.mono-project.com/">MONO</a> ha raggiunto una notevole maturita', e la compatibilita' con il framework .NET di Microsoft e' abbastanza alta.</p><p>Trovandomi ultimamente a sviluppare in ASP.NET (e non essendo 'pro-microsoft' un po' mi brucia dover ammettere che la piattaforma .NET il suo lavoro lo fa bene!) mi sono posto una domanda: posso far girare le mie applicazioni ASP.NET su Apache utilizzando MONO? </p></td><td><img width="100" height="120" border="0" src="http://www.andreafortuna.net/wp-content/Mono-gorilla-aqua.100px.png" alt="" /> </td></tr></table><a name='more'></a><p>Beh, a quanto pare e' possibile!</p><p>Partiamo dal mio server di sviluppo:</p><blockquote><p>GNU/Linux Fedora Core 2</p><p>Apache 2.0.51</p></blockquote><p>Facendo una rapida ricerca sul sito del <a target="_blank" href="http://www.mono-project.com/">Progetto MONO</a> trovo un po' di pacchetti RPM che fanno al caso mio:</p><ol></ol><ol><li>mono-core-1.1.9-0.novell.i586.rpm<font> (<a href="http://www.go-mono.com/download/x86/mono-1.1/1.1.9/mono-core-1.1.9-0.novell.i586.rpm">download</a>) </font></li><li>mono-data-1.1.9-0.novell.i586.rpm<font> (<a href="http://www.go-mono.com/download/x86/mono-1.1/1.1.9/mono-data-1.1.9-0.novell.i586.rpm">download</a>) </font></li><li>mono-web-1.1.9-0.novell.i586.rpm<font> (<a href="http://www.go-mono.com/download/x86/mono-1.1/1.1.9/mono-web-1.1.9-0.novell.i586.rpm">download</a>) </font></li><li>xsp-1.1.9-0.novell.noarch.rpm<font> (<a href="http://www.go-mono.com/download/noarch/xsp/1.1.9/xsp-1.1.9-0.novell.noarch.rpm">download</a>) </font></li><li><div>mod_mono-1.1.9-0.fedora3.novell.i386.rpm<font> (<a href="http://www.go-mono.com/download/fedora-3-i386/mod_mono/1.1.9/mod_mono-1.1.9-0.fedora3.novell.i386.rpm">download</a>) </font></div></li></ol><p>Per evitare problemi con le dipendenze, i suddetti pacchetti vanno installati (utilizzando il comando <em>rpm --install nomepacchetto</em>) nello stesso ordine in cui li ho elencati.</p><p>I primi 3 pacchetti (mono-core, mono-data, mono-web) contengono il 'cuore' della piattaforma MONO, quindi il compilatore C#, le librerie di classi e il RunTime.</p><p>Il pacchetto <em>xsp-1.1.9-0.novell.noarch.rpm</em> installa XSP, un piccolo WebServer scritto in C# e con la possibilita' di servire pagine Asp.Net.XSP verra' utilizzato da Apache, con l'aiuto del modulo <em>mod_mono</em> (installato dall'ultimo pacchetto) che si occupera' di rendere possibile il 'collegamento'.</p><p>Una volta effettuata l'installazione dei pacchetti, testiamo che tutto sia andato a buon fine. Per prima cosa diamo uno sguardo a cosa e' stato installato e dove:</p><ol><p><table border="1"><tr><td>Compilatore C#</td><td>/usr/bin/mcs</td></tr><tr><td>RunTime Mono</td><td>/usr/bin/mono</td></tr><tr><td>Librerie di Classi</td><td>/usr/lib/mono</td></tr><tr><td>Binari di XSP</td><td>/usr/lib/xsp</td></tr><tr><td>Scripts di avvio di XSP</td><td>/usr/bin/xsp/usr/bin/xsp2</td></tr><tr><td>Pagine ASP.Net di esempio</td><td>/usr/lib/xsp/test</td></tr><tr><td>mod_mono.so </td><td>/etc/httpd/modules/</td></tr></table></p></ol><p>Proviamo quindi a compilare un semplicissimo programma in C#, il celebre 'Ciao, Mondo!':</p><p><strong>CiaoMondo.cs</strong></p><blockquote><p>public class CiaoMondo{   public static void Main()   {      System.Console.WriteLine("Ciao, Mondo!");   }}</p></blockquote><p>Una volta creato il file, lo compiliamo e lo mandiamo in esecuzione:</p><blockquote><p>[andrea@patroclo mono]$ mcs CiaoMondo.cs[andrea@patroclo mono]$ lsCiaoMondo.cs  CiaoMondo.exe[andrea@patroclo mono]$ mono CiaoMondo.exeCiao, Mondo![andrea@patroclo mono]$</p></blockquote><p><strong>Testiamo XSP</strong></p><p>Se il test precedente e' andato a buon fine, sia il compilatore che il RunTime di MONO sono stati installati correttamente.</p><p>A questo punto possiamo provare ad avviare XSP:</p><blockquote><p>[andrea@patroclo mono]$ cd /usr/lib/xsp/test[andrea@patroclo test]$ xspxspListening on port: 8080Listening on address: 0.0.0.0Root directory: /usr/lib/xsp/testHit Return to stop the server.</p></blockquote><p>Ci siamo posizionati nella directory dove sono presenti le pagine di esempio e abbiamo avviato XSP direttamente da li (XSP, infatti, cerca le pagine da servire direttamente nella directory dalla quale viene invocato): caricando con un browser l'indirizzo <a href="http://nomeserver:8080/">http://nomeserver:8080/</a> verranno quindi presentate le pagine di esempio contenute in <em>/usr/lib/xsp/test</em>.</p><p><strong>Integriamo il tutto con Apache</strong></p><p>L'ultimo passo da compiere e' interfacciare Apache con XSP in modo da permettergli di processare correttamente le pagine ASP.NET.</p><p>Modifichiamo quindi <em>/etc/httpd/conf/httpd.conf </em>e aggiungiamo in fondo alla sezione dove vengono dichiarati i moduli la seguente riga:</p><blockquote><p>LoadModule mono_module modules/mod_mono.so</p></blockquote><p>Aggiungiamo anche</p><blockquote><p>## ASP.Net#MonoServerPath /usr/lib/xsp/2.0/mod-mono-server2.exe</p><p>Alias /samples "/usr/lib/xsp/test"MonoApplications "/samples:/usr/lib/xsp/test"</p><p>    SetHandler mono</p></blockquote><p>creando cosi' un alias /samples sul webserver che puntera' alla cartella con le pagine di esempio trattata prima.</p><p>A questo punto riavviamo Apache </p><blockquote><p>[root@patroclo root]# /etc/init.d/httpd restartInterruzione di httpd:                                     [  OK  ]Avvio di httpd:                                            [  OK  ][root@patroclo root]#</p></blockquote><p>apriamo il browser e puntiamo su <a href="http://nomeserver/samples">http://nomeserver/samples</a>: dovrebbe apparire la lista delle pagine di esempio visualizzata nel precedente test di XSP.</p><p>L'installazione di Mono su Apache ora e' terminata, l'unica cosa da fare e' aggiungere altri <em>alias</em> sulla configurazione di Apache in modo da definire bene dove deve operare Mono.</p><p>Ad esempio, se volessimo installare sul nostro Apache una applicazione chiamata Pippo, dovremmo aggiungere al file di configurazione le seguenti righe:</p><blockquote><p>Alias /Pippo "/var/www/html/Pippo/"MonoApplications "/Pippo:/var/www/html/Pippo/"    SetHandler mono</p></blockquote><p>e, una volta riavviato Apache, copiare nella directory <em>/var/www/html/Pippo/</em> la nostra applicazione ASP.NET. </p>