---
layout: post
title: 'PhoneGap: effettuare il download di un file'
date: '2013-06-03T10:00:00.000+02:00'
author: Andrea Fortuna
tags:
- JavaScript
- Programmazione
- code snippets
- html5
- phonegap
modified_time: '2013-06-03T10:00:07.960+02:00'
thumbnail: http://1.bp.blogspot.com/-NQ2KO52hP9A/UZomqkBE9MI/AAAAAAAAEv0/PKAEfpuhTEo/s72-c/HTML5_logo.svg.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-4511800983222792751
blogger_orig_url: http://www.andreafortuna.org/2013/06/phonegap-effettuare-il-download-di-un.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-NQ2KO52hP9A/UZomqkBE9MI/AAAAAAAAEv0/PKAEfpuhTEo/s1600/HTML5_logo.svg.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-NQ2KO52hP9A/UZomqkBE9MI/AAAAAAAAEv0/PKAEfpuhTEo/s200/HTML5_logo.svg.png" width="200" /></a></div><a href="http://www.andreafortuna.org/search/label/html5" target="_blank">HTML5</a> ha in parte rivoluzionato il modo in cui le webapp si relazionano con le piattaforme sulle quali vengono eseguite.<br /><br /><a href="http://dev.w3.org/2009/dap/file-system/pub/FileSystem/" target="_blank">Filesystem API</a> ne è un esempio: permette a una web app di creare, leggere, navigare e scrivere in una sezione sandbox del file system locale dell'utente.<br /><br />Una web app può richiedere l'accesso al filesystem utilizzando il metodo <i>window.requestFileSystem()</i>:&nbsp;quando viene richiamato per la prima volta, viene creato un nuovo filesystem esclusivo per l'applicazione.<br /><br /><a name='more'></a><br />E 'importante ricordare che il filesystem è <a href="http://it.wikipedia.org/wiki/Sandbox" target="_blank">sandboxed</a>: una applicazione web non può quindi accedere ai file di un altro app e non è possibile leggere o scrivere file in una cartella arbitraria sul disco rigido dell'utente.<br /><br />Utilizzando <i>window.requestFileSystem</i> e l'oggetto <a href="http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer" target="_blank">FileTransfer</a> di <a href="http://www.andreafortuna.org/search/label/phonegap" target="_blank">PhoneGap </a>possiamo scrivere una breve funzione che ci permetta di scaricare un file da un server remoto e salvarlo sul filesystem del PC/Dispositivo:<br /><br /><br /><script src="https://gist.github.com/andreafortuna/060a2913f9fbd314f790.js"></script> <br />L'utilizzo è semplice: va richiamata passando l'url da dove scaricare il file, il nome che si vuole assegnare al file nel momento del salvataggio e una funzione di callBack che verrà richiamata ad operazione terminata e alla quale verrà passato il path locale del file.<br /><br />Ad esempio:<br /><br /><pre class="brush:java">downloadFile("http://www.andreafortuna.org/robots.txt&gt;", "robots.txt",function(filepath){<br />   alert("Download terminato, il path e' " + filepath);<br />});<br /></pre>