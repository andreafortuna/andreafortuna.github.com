---
layout: post
title: 'iOS e PhoneGap: richieste AJAX su https con certificati self signed'
date: '2013-04-28T12:23:00.000+02:00'
author: Andrea Fortuna
tags:
- yattrssc
- AJAX
- phonegap
- iOS
- jquery mobile
modified_time: '2013-04-28T13:35:48.385+02:00'
thumbnail: http://4.bp.blogspot.com/-_m9bCZ_p1j4/UXWQTMv92CI/AAAAAAAAEiA/gvxe6cCjN8s/s72-c/yattrss.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-5212869123900026316
blogger_orig_url: http://www.andreafortuna.org/2013/04/ios-e-phonegap-richieste-ajax-su-https.html
---

<br /><div class="separator" style="clear: both; text-align: center;"></div><a href="http://4.bp.blogspot.com/-_m9bCZ_p1j4/UXWQTMv92CI/AAAAAAAAEiA/gvxe6cCjN8s/s1600/yattrss.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://4.bp.blogspot.com/-_m9bCZ_p1j4/UXWQTMv92CI/AAAAAAAAEiA/gvxe6cCjN8s/s200/yattrss.png" width="200" /></a>Uno degli utenti di <a href="http://www.andreafortuna.org/search/label/yattrssc" target="_blank">YATTRSSC</a> mi segnala che l'accesso alla sua istanza di <b>TT-RSS</b> non va a buon fine: il suo server risponde esclusivamente su HTTPS con certificato <i>self signed</i>.<br /><br /><a href="http://1.bp.blogspot.com/-UkIWz76TZbk/UQEDqzxgaeI/AAAAAAAAETY/s40QbykOxUI/s1600/graphic_build_bot.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="170" src="http://1.bp.blogspot.com/-UkIWz76TZbk/UQEDqzxgaeI/AAAAAAAAETY/s40QbykOxUI/s200/graphic_build_bot.png" width="200" /></a>Un rapido debug (e una ricerca su google) mi conferma che il webkit utilizzato come sandbox per l'applicazione phonegap in caso di certificato non affidabile alla prima richiesta chiederebbe (come detta lo standard) la conferma dell'utente a proseguire.<br /><br />Il problema Ã¨ che si aspetta la conferma anche nel caso di una richiesta <i>AJAX</i>, che a quel punto fallisce miseramente.<br /><br /><a name='more'></a><br /><br />La soluzione? Abbastanza semplice a dire il vero: qualche riga di codice per convincere il webkit ad accettare in maniera silenziosa tutti i certificati.<br /><br />Da aggiungere alla fine di <b>AppDelegate.m</b>:<br /><pre class="brush:java">    <br />    @implementation NSURLRequest(DataController)<br />    + (BOOL)allowsAnyHTTPSCertificateForHost:(NSString *)host<br />    {<br />        return YES;<br />    }<br />    @end<br /></pre>