---
layout: post
title: Verificare se una pagina è in primo piano con le PageVisibility API di HTML5
date: '2013-06-11T10:00:00.000+02:00'
author: Andrea Fortuna
tags:
- video
- JavaScript
- Programmazione
- html5
- PageVisibilty API
modified_time: '2013-06-11T10:00:08.468+02:00'
thumbnail: http://3.bp.blogspot.com/-8wGSyPGfol8/UayA0H3ImeI/AAAAAAAAFN0/EkkuEfK7uZ4/s72-c/PageVisibility.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-5538221363619394019
blogger_orig_url: http://www.andreafortuna.org/2013/06/verificare-se-una-pagina-e-in-primo.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-8wGSyPGfol8/UayA0H3ImeI/AAAAAAAAFN0/EkkuEfK7uZ4/s1600/PageVisibility.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="291" src="http://3.bp.blogspot.com/-8wGSyPGfol8/UayA0H3ImeI/AAAAAAAAFN0/EkkuEfK7uZ4/s320/PageVisibility.png" width="320" /></a></div>Le <a href="http://www.w3.org/TR/page-visibility/" target="_blank">PageVisibility API</a> permettono di determinare se la pagina è visibile o meno.<br /><br />Quando si minimizza la pagina o ci si sposta in un'altra scheda viene scatenato un evento che può essere intercettato e utilizzato per diversi scopi: mettere in pausa un gioco, fermare un carousel di immagini, mettere in pausa delle attività in background della pagina o mettere in pausa la riproduzione di un contenuto audio/video.<br /><br />Nel codice di esempio mi soffermo proprio sull'ultimo punto: ho realizzato una semplice pagina che avvia immediatamente la riproduzione di una clip video (tratta dal divertente <a href="http://www.bigbuckbunny.org/">Big Buck Bunny</a>) e si occupa di mettere in pausa e riavviare il video quando la visibilità della scheda cambia.<br /><br /><a name='more'></a>La versione corrente delle PageVisibilityAPI definisce due proprietà del documento: il boolean <i>hidden</i>&nbsp;e l'enumeratore&nbsp;<i>visibilityState</i>.<br />La proprietà <i>visibilityState </i>attualmente ha quattro valori possibili: "hidden", "visible", "prerender", and "unloaded".<br /><br />Queste proprietà sono attualmente vendor-prefixed, quindi fino a quando la funzionalità non sarà diventata <i>ufficiale</i>&nbsp;sarà necessario specificare i prefissi specifici per ogni browser: proprio per questo motivo, nel codice di esempio sono implementate una coppia di funzioni (righe 12-29) che si occupano di <i>ciclare</i>&nbsp;tutti i prefissi conosciuti alla ricerca di quello corretto per il browser che sta eseguendo lo script.<br /><br /><script src="https://gist.github.com/andreafortuna/39f9bb05c0129c4d168a.js"></script> <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://demo.andreafortuna.org/HTML5PageVisibilityAPI/" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" target="_blank"><img border="0" src="http://4.bp.blogspot.com/--a636JhrqsA/UaxSqfKXRkI/AAAAAAAAFNU/YBpXvRkMxA4/s1600/DEMO.png" /></a></div>