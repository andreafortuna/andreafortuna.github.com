---
layout: post
title: Rendere più leggibili i crash logs di iOs con symbolicatecrash
date: '2013-05-29T10:30:00.000+02:00'
author: Andrea Fortuna
tags:
- XCode
- Programmazione
- iOS
modified_time: '2013-05-29T10:30:37.295+02:00'
thumbnail: http://1.bp.blogspot.com/-gU_cOaS9DXc/UaW7TECZ0HI/AAAAAAAAFMM/w0lVIsmvpPs/s72-c/Xcode_icon.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-3172034174960874914
blogger_orig_url: http://oldsite.andreafortuna.org/2013/05/rendere-piu-leggibili-i-crash-logs-di.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-gU_cOaS9DXc/UaW7TECZ0HI/AAAAAAAAFMM/w0lVIsmvpPs/s1600/Xcode_icon.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-gU_cOaS9DXc/UaW7TECZ0HI/AAAAAAAAFMM/w0lVIsmvpPs/s200/Xcode_icon.png" width="200" /></a></div>Chiunque sviluppi su iOs si è sicuramente scontrato con la risoluzione dei crash delle proprie app, sia in fase di test 'interno', sia con le applicazioni già presenti in AppStore.<br /><br />Tutti i dispositivi iOs salvano i log di tutti i crash, proprio per <i>aiutare</i>&nbsp; lo sviluppatore a scoprirne le cause, ma non sempre questi log sono immediatamente comprensibili.<br /><br /><a name='more'></a><br /><br /><br />Vediamo un esempio di crashlog per un'ipotetica applicazione <i>MyApp</i>:<br /><br /><pre>Exception Type:  EXC_BAD_ACCESS (SIGBUS)<br />Thread 0 name:  Dispatch queue: com.apple.main-thread<br />Thread 0 Crashed:<br />0   libobjc.A.dylib           0x313fec98 0x313fc000 + 11416<br />1   MyApp                     0x00019c12 0x1000 + 101394<br />2   MyApp                     0x0000a1cc 0x1000 + 37324<br />3   MyApp                     0x0000c474 0x1000 + 46196<br />4   libdispatch.dylib         0x33e9d8e0 0x33e92000 + 47328<br />5   libdispatch.dylib         0x33e991ee 0x33e92000 + 29166<br />6   CoreFoundation            0x3568e934 0x35616000 + 493876<br />7   CoreFoundation            0x3561eebc 0x35616000 + 36540<br />8   CoreFoundation            0x3561edc4 0x35616000 + 36292<br />9   GraphicsServices          0x343cd418 0x343c9000 + 17432<br />10  GraphicsServices          0x343cd4c4 0x343c9000 + 17604<br />11  UIKit                     0x3608ad62 0x3605c000 + 191842<br />12  UIKit                     0x36088800 0x3605c000 + 182272<br />13  MyApp                     0x000024ec 0x1000 + 5356<br />14  MyApp                     0x000024ac 0x1000 + 5292<br /></pre><br />e qui arriva il bello: per ogni entry è presente la riga di codice dove si è presentato il problema, ma l'oggetto corrispondente viene rappresentato solamente con un codice esadecimale.<br /><br />Per capire qualcosa di più ci viene in aiuto <i>symbolicatecrash</i>, un tool da linea di comando presente in <a href="http://oldsite.andreafortuna.org/search/label/XCode" target="_blank">XCode</a> che permette di collegare i codici esadecimali alle classi corrispondenti.<br /><br />Ovviamente è indispensabile archiviare ogni build che viene distribuita, in quando&nbsp;symbolicatecrash ha necessità tanto del log quanto della build che lo ha generato.<br /><br />symbolicatecrash è prelevabile da <br /><pre class="brush:java;">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash</pre>Per comodità, consiglio di creare un alias per richiamare il comando senza dover specificare ogni volta il path completo: modificate (o create, se non presente) il file .bash_profile nella vostra home directory e aggiungete al suo interno la seguente riga: <br /><pre class="brush:java;">alias symbolicate="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash -v"<br /></pre>salvate, uscite e riavviate il terminale.<br /><br />Una volta configurato l'alias possiamo procedere all'interpretazione del log: <br /><pre class="brush:java;">symbolicate "MyApp_2013-05-24-170900-iPhone.crash" "MyApp.app"<br /></pre>il comando restituirà sullo standard output il log con questo formato:  <br /><pre>Exception Type:  EXC_BAD_ACCESS (SIGBUS)<br />Thread 0 name:  Dispatch queue: com.apple.main-thread<br />Thread 0 Crashed:<br />0   libobjc.A.dylib        0x33b24c98 objc_msgSend + 16<br />1   MyApp                  0x00019c12 -[TwoLineNavBarTitleView setLine2:] <br />                                       (TwoLineNavBarTitleView.m:43)<br />2   MyApp                  0x0000a1cc -[ListViewController <br />                                       listModelDidFinishQueryingForRadius:] <br />                                       (ListViewController.m:160)<br />3   MyApp                  0x0000c474 __45-[ListViewModel <br />                                       filterParksBasedOnCategories]<br />                                       (ListViewModel.m:129)<br />4   libdispatch.dylib      0x33d108e0 _dispatch_call_block_and_release + 4<br />5   libdispatch.dylib      0x33d0c1ee _dispatch_main_queue_callback + 306<br />6   CoreFoundation         0x3039f934 __CFRunLoopRun + 1328<br />7   CoreFoundation         0x3032febc CFRunLoopRunSpecific + 224<br />8   CoreFoundation         0x3032fdc4 CFRunLoopRunInMode + 52<br />9   GraphicsServices       0x35571418 GSEventRunModal + 108<br />10  GraphicsServices       0x355714c4 GSEventRun + 56<br />11  UIKit                  0x358c7d62 -[UIApplication _run] + 398<br />12  UIKit                  0x358c5800 UIApplicationMain + 664<br />13  MyApp                  0x000024ec main (main.m:14)<br />14  MyApp                  0x000024ac 0x1000 + 5292<br /><br /></pre>sicuramente molto più comprensibile! <br /><br /><div style="text-align: right;"><span style="font-size: x-small;"><i>via&nbsp;<a href="http://kevincupp.com/2011/05/12/symbolicating-ios-crash-logs.html" target="_blank">http://kevincupp.com/2011/05/12/symbolicating-ios-crash-logs.html</a></i></span></div>