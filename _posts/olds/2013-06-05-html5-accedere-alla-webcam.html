---
layout: post
title: 'HTML5: accedere alla webcam'
date: '2013-06-05T09:30:00.000+02:00'
author: Andrea Fortuna
tags:
- webcam
- JavaScript
- html5
- WebRTC
modified_time: '2013-06-05T16:57:43.080+02:00'
thumbnail: http://3.bp.blogspot.com/-KxZ1klNbt3c/Uan_RTMr0kI/AAAAAAAAFMw/Ji4KhiYvWjw/s72-c/webRTC1.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-5170403288509545201
blogger_orig_url: http://oldsite.andreafortuna.org/2013/06/html5-accedere-alla-webcam.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-KxZ1klNbt3c/Uan_RTMr0kI/AAAAAAAAFMw/Ji4KhiYvWjw/s1600/webRTC1.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://3.bp.blogspot.com/-KxZ1klNbt3c/Uan_RTMr0kI/AAAAAAAAFMw/Ji4KhiYvWjw/s200/webRTC1.png" width="200" /></a></div>La cattura audio/video è stata per parecchio tempo una sorta di 'pietra filosofale' dello sviluppo per il web: &nbsp;per anni è stato obbligatorio fare affidamento su plugins da installare nel browser (Flash/ Silverlight).<br /><br />HTML5 fortunatamente viene in soccorso del povero web developer con un nuovo protocollo chiamato&nbsp;WebRTC (Web Real Time Communications).<br /><br />La specifica è controllata dal <a href="http://www.w3.org/2011/04/webrtc/" target="_blank">W3C WebRTC Working Group</a>&nbsp;e&nbsp;Google, Opera, Mozilla, e pochi altri stanno lavorando per implementare le nuove funzionalità sui loro browser.<br /><br /><br /><a name='more'></a><br /><br />Il metodo <i>getUserMedia()</i> fornisce i mezzi per accedere ai flussi multimediali di webcam e microfono: vediamo come utilizzarlo per realizzare una semplice webapp che acceda alla webcam e ci permetta di scattare delle foto:<br /><br /><script src="https://gist.github.com/andreafortuna/194e05cada4044b580e9.js"></script> La funzione <i>init()</i>&nbsp;(righe 8-33) per prima cosa realizza un layer di compatibilità cross-browser (righe 9-10), in seguito richiama il metodo <i>navigator.getUserMedia</i> e nella funziona di callBack dirotta lo stream &nbsp;della webcam sull'oggetto video (righe 19/21).<br /><br />La funzione <i>snapshot()</i>&nbsp;utilizza l'oggetto <b>canvas</b> nascosto (riga 66) come <i>appoggio</i>&nbsp;per accogliere l'istantanea presa dall'oggetto video (riga 45), estrarne l'immagine in base64 e visualizzarla nell'oggetto <b>img</b> (riga 46).<br /><br />Prima però, il&nbsp;<b>canvas</b> ha necessità di essere ridimensionato in rapporto alle dimensioni dell'oggetto <b>video</b> (righe 37-43).<br /><br />WebRTC è supportato correttamente da Chrome e Firefox.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://demo.andreafortuna.org/HTML5WebCam/" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" target="_blank"><img border="0" src="http://4.bp.blogspot.com/--a636JhrqsA/UaxSqfKXRkI/AAAAAAAAFNU/YBpXvRkMxA4/s1600/DEMO.png" /></a></div><br /><br />