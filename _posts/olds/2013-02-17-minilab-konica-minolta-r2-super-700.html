---
layout: post
title: 'Minilab Konica Minolta R2 Super 700: disco pieno?'
date: '2013-02-17T11:58:00.002+01:00'
author: Andrea Fortuna
tags:
- Konica Minolta R2 Super 700
- Linux
- Hacking
- Red Hat 5.2
modified_time: '2013-06-10T16:31:14.134+02:00'
thumbnail: http://1.bp.blogspot.com/-DDq1GtiS_Ao/USCv45JHb_I/AAAAAAAAEX4/dQ_eXRfrIGg/s72-c/r2-700c.jpg
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-6184555816218827744
blogger_orig_url: http://oldsite.andreafortuna.org/2013/02/minilab-konica-minolta-r2-super-700.html
---

<a href="http://1.bp.blogspot.com/-DDq1GtiS_Ao/USCv45JHb_I/AAAAAAAAEX4/dQ_eXRfrIGg/s1600/r2-700c.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/-DDq1GtiS_Ao/USCv45JHb_I/AAAAAAAAEX4/dQ_eXRfrIGg/s200/r2-700c.jpg" width="188" /></a>Ieri mi arriva una richiesta di aiuto inconsueta: un amico di un parente ha un laboratorio di sviluppo e stampa fotografica, e il fulcro dell'attività è un Minilab <b>Konica Minolta R2 Super 700</b>, una grossa apparecchiatura che permette di acquisire negativi e file di immagini e stamparli nei formati richiesti. <br /><br />L'apparato è comandato da 2 normali PC: uno con installato <b>Windows Xp</b> e un software&nbsp; <b>Minolta</b>, che si occupa di gestire l'acquisizione dei media e inoltrare le richieste di stampa, mentre un'altro, 'incastrato' all'interno dell'apparecchio, con installato <b>Linux</b> e che si occupa di gestire la stampa delle foto.<br /><br /><a name='more'></a><br /><br />Da un paio di giorni a questa parte, l'accrocco in questione aveva misteriosamente smesso di funzionare correttamente: la calibratura della stampa non avveniva più e tutta un'altra serie di operazioni di manutenzione non venivano portate a termine, il che comportava una qualità di stampa che andava viavia peggiorando.<br /><br />Il tecnico dell'assistenza <b>Konica Minolta</b> rispondeva alle richieste più o meno così: <i><br /></i><br /><blockquote class="tr_bq"><i>"Posso occuparmi solo del PC con windows Xp, di linux non capisco niente (!!!), e poi l'apparato ha più di 10 anni e potreste anche pensare a un aggiornamento" </i></blockquote>A questo punto mi viene chiesto come ultima spiaggia di provare a dare uno sguardo.<br /><br />Per prima cosa, individuo il secondo PC inbullonato nella base dell'apparato di stampa: infilandomi all'interno riesco a trovare le porte <b>VGA</b> e quelle <b>PS2</b> di mouse e tastiera.<br /><br />Una volta collegati i device, mi si presenta davanti agli occhi una schermata familiare:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-HkZ97MrHtF0/USCyd-qxd8I/AAAAAAAAEYI/l6_Ry5p2QS0/s1600/6e.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="480" src="http://3.bp.blogspot.com/-HkZ97MrHtF0/USCyd-qxd8I/AAAAAAAAEYI/l6_Ry5p2QS0/s640/6e.jpg" width="640" /></a></div><br />Trattasi di una vetusta <b>RedHat 5.2</b> in <i><b>giapponese</b></i> :-)<br /><br /><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; margin-left: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-0JriYN_l9gk/USCy05SwmCI/AAAAAAAAEYQ/mRoCTyClXm0/s1600/71.jpg" imageanchor="1" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://1.bp.blogspot.com/-0JriYN_l9gk/USCy05SwmCI/AAAAAAAAEYQ/mRoCTyClXm0/s320/71.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">man rm, in giapponese!</td></tr></tbody></table>Balza subito all'occhio un bel messaggio di errore:<br /><blockquote class="tr_bq"><i>Not enogh free space on a disk</i><br /><i>Clean-up the disk</i></blockquote><br />riferito al device<b> /dev/hda7</b>.<br /><br />Un rapido <b>df -h</b> mostra che la partizione con mountpoint su <b>/RDIF</b> (circa 1 GB) ha lo spazio libero ridotto a zero.<br /><br />La directory in questione sembra contenere esclusivamente file di log delle operazioni di stampa e manutenzione, di cui alcuni risalgono addirittura al 2003!<br /><br />A quanto pare, non riuscendo a scrivere ulteriori file di log, le procedure di maintenance non venivano portate a termine.<br />Tra tutte le procedure in questione, la Minolta non ha ovviamente pensato a inserirne una che periodicamente cancellasse i log più vecchi. ;-)<br /><br />Con un rapido colpo di <b>rm</b> (previo ovviamente backup) rimuovo tutti i vecchi log e magicamente il minilab ricomincia a lavorare correttamente.<br /><br />Prima di staccare monitor e tastiera, mi premuro di inserire un semplice script in <b>/etc/cron.weekly</b> che si occupa di rimuovere i vecchi log da <b>/RDIF</b>.<br /><br />Dubito che il tutto possa servire a qualcuno dei lettori, ma non si sa mai! :-D