---
layout: post
title: 'Ruby on Rails: utilizzare Devise per la gestione degli utenti'
date: '2013-07-09T10:00:00.000+02:00'
author: Andrea Fortuna
tags:
- Ruby on Rails
- Ruby
- tutorial
- Devise
modified_time: '2013-07-09T10:00:03.311+02:00'
thumbnail: http://1.bp.blogspot.com/-f12vfgt87uY/UcqdK8_wJoI/AAAAAAAAFVE/AfjjgSBOflA/s72-c/150px-Ruby_on_Rails.svg.png
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-471155070318807581
blogger_orig_url: http://www.andreafortuna.org/2013/07/ruby-on-rails-utilizzare-devise-per-la.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-f12vfgt87uY/UcqdK8_wJoI/AAAAAAAAFVE/AfjjgSBOflA/s194/150px-Ruby_on_Rails.svg.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-f12vfgt87uY/UcqdK8_wJoI/AAAAAAAAFVE/AfjjgSBOflA/s200/150px-Ruby_on_Rails.svg.png" width="60" /></a></div><a href="https://github.com/plataformatec/devise" target="_blank">Devise</a> è un'ottima libreria per RoR dedicata alla gestione degli utenti.<br /><br />Permette di gestire facilmente la registrazione, il recupero delle credenziali di accesso e i ruoli.<br />Vediamo i semplici passi necessari per implementarla all'interno di un progetto RubyOnRails.<br /><br /><a name='more'></a><br /><h3>Installiamo la gemma</h3>Per prima cosa, modificare il file Gemfile del progetto aggiungendo la riga<br /><br /><pre class="brush:xml">gem 'devise'<br /></pre><br />e lanciando successivamente l'aggiornamento di bundle:<br /><br /><pre class="brush:xml">bundle install<br /></pre><br /><h3>Abilitiamo e configuriamo devise</h3>Richiamiamo il seguente comando dalla console:<br /><br /><pre class="brush:xml">rails generate devise:install<br /></pre><br />Apriamo il file config/environments/development.rb e aggiungiamo prima della keyword end questa riga:<br /><br /><pre class="brush:xml">config.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }<br /></pre><br />Modifichiamo il file app/views/layouts/application.html.erb aggiungendo prima del tag &lt;%= yield %&gt; questo codice:<br /><br /><pre class="brush:xml">&lt;% if notice %&gt;<br />&lt;%= notice %&gt;<br />&lt;% end %&gt;<br />&lt;% if alert %&gt;<br />&lt;%= alert %&gt;<br />&lt;% end %&gt;<br /></pre><br /><h3>Creiamo il modello</h3>Generiamo il modello:<br /><br /><pre class="brush:xml">rails generate devise user<br /></pre><br />e applichiamo le modifiche al database:<br /><br /><pre class="brush:xml">rake db:migrate<br /></pre><br /><h3>Ora possiamo creare un nuovo utente</h3>Avviamo il server (se non era stato già fatto) con rails s e colleghiamoci a <a href="http://localhost:3000/users/sign_up">http://localhost:3000/users/sign_up</a>: se tutto è andato a buon fine, dovremmo vedere la pagina di creazione dell'account che ci permetterà di effettuare il sign-up.<br /><br /><br /><h3>Integriamo nell'app i link per il login e la creazione dell'account</h3>Modifichiamo il file app/views/layouts/application.html.erb e aggiungiamo questo frammento di codice nel punto in cui vogliamo visualizzare i controlli:<br /><br /><pre class="brush:xml">&lt;% if user_signed_in? %&gt;<br />Logged in as &lt;strong&gt;&lt;%= current_user.email %&gt;&lt;/strong&gt;.<br />&lt;%= link_to 'Edit profile', edit_user_registration_path, :class =&gt; 'navbar-link' %&gt; |<br />&lt;%= link_to "Logout", destroy_user_session_path, method: :delete, :class =&gt; 'navbar-link'  %&gt;<br />&lt;% else %&gt;<br />&lt;%= link_to "Sign up", new_user_registration_path, :class =&gt; 'navbar-link'  %&gt; |<br />&lt;%= link_to "Login", new_user_session_path, :class =&gt; 'navbar-link'  %&gt;<br />&lt;% end %&gt;<br /></pre>