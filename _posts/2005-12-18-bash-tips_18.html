---
layout: post
title: Bash Tips
date: '2005-12-18T16:12:00.001+01:00'
author: Andrea Fortuna
tags:
- Unix
modified_time: '2012-04-26T14:24:31.113+02:00'
blogger_id: tag:blogger.com,1999:blog-1948348952555789070.post-4887660974680568020
blogger_orig_url: http://www.andreafortuna.org/2005/12/bash-tips_18.html
---

<p>GNU Bash e' sicuramente tra le shell piui potenti disponibili per sistemi *nix (e, con qualche modifica anche per sistemi Windows).</p><p>Alcune funzionalita' pero' non sono molto note, pur essendo comodissime. Facciamo un piccolo riassunto:</p><a name='more'></a><p><strong>Navigare nelle directory</strong></p><ul><li>Digitanto <strong>cd</strong> senza parametri, si entra nella propria home directory</li><li>La home directory puo' essere richiamata nei parametri di un comando/script con la variabile d'ambiente <strong>~</strong></li><li>Per tornare alla directory visitata precedentemente, si utilizza <strong>cd -</strong></li><li>Con i comandi <strong>pushd </strong>e <strong>popd</strong> si puo' creare uno storico delle directory visitate: in pratica, utilizzando <strong>pushd</strong> al posto del comando <strong>cd</strong> e' possibile salvare il percorso effettuato in una coda LIFO (Last input, First output), richiamabile in qualsiasi momento con il comando <strong>popd</strong> (un po' come i sassolini di Pollicino :))</li></ul><p><strong>Riutilizzare gli argomenti</strong></p><p>Bash memorizza l'ultimo argomento passato a un comando nella variabile d'ambiente $_. E' possibile quindi riutilizzarlo nei comandi successivi.</p><blockquote><p>mkdir /home/andrea/pippocd $_</p></blockquote><p>(creo la directory <em>pippo</em> e ci entro)</p><p><strong>Storico dei comandi</strong></p><p><em>Ricerca nello storico</em>: digitanto <strong>CTRL+r</strong> e alcuni caratteri presenti nel comando da cercare, bash restituira' l'ultimo comando presente nello storico che soddisfa i criteri di ricerca.</p><p><em>Ricerca diretta</em>: usando il carattere <strong>!</strong> e' possibile richiamare un preciso comando dallo storico.</p><blockquote><p>$ !-2</p></blockquote><p>richiama ed esegue il penultimo comando eseguito mentre</p><blockquote><p>$ !!</p></blockquote><p>esegue l'ultimo.</p><p>Anche in questo caso si puo' effettuare una ricerca in base a un criterio, ad esempio</p><blockquote><p>$ !tail</p></blockquote><p>ricerca ed esegue l'ultimo comando nello storico iniziante con la stringa <strong>tail</strong>.</p><p>Se la ricerca deve essere eseguita non all'inizio ma all'interno del comando, la sintassi e' questa:</p><blockquote><p>$ !?paroladacercare?</p></blockquote><p><strong>Editing</strong></p><p>Con bash e' possibile editare la riga di comando utilizzando semplici combinazioni di tasti:</p><ul><li><div>CTRL+a: Vai all'inizio delle linea </div></li><li><div>CTRL+e: Vai alla fine della linea </div></li><li><div>CTRL+k: Cancella fino dalla posizione corrente alla fine della linea </div></li><li><div>CTRL+u: Cancella fino dalla posizione corrente all'inizio della linea </div></li><li><div>CTRL+l: Pulisce lo schermo </div></li><li><div>META+f: Vai una parola avanti </div></li><li><div>META+b: Vai una parola indietro </div></li><li><div>META+d: Cancella la parola successiva </div></li><li><div>META+backspace: Cancella la parola precedente </div></li></ul><p>Il tasto <strong>META</strong> puo' essere ottenuto in 2 modi: tenendo premuto il tasto <strong>ALT</strong> e il tasto di comando, oppure premendo e rilasciando il tasto <strong>ESC</strong> e successivamente il pulsante di comando.</p><p><strong>Storico dei parametri</strong></p><p>E' possibile richiamare lo storico dei parametri passati ai comandi precedenti con la combinazione <strong>META+.</strong></p><p><strong>Variabili Speciali</strong></p><ul><li><div><strong>$? </strong>: contiene il valore di uscita dell'ultimo comando eseguito (0=nessun errore, qualsiasi altro valore e' il codice dell'errore verificatosi)</div></li><li><div><strong>$@</strong> : contiene la lista dei parametri passati allo script. Esempio:</div></li></ul><blockquote><p>LISTA_FILES=$@</p><p>for file in $LISTA_FILES; do    cat $file   done</p><p>Visualizza il contenuto di tutti i file i cui nomi sono stati passati come parametro allo script.</p></blockquote><ul><li><div><strong>$$</strong> : restituisce il PID del processo corrente</div></li><li><div><strong>$!</strong> : restituisce il PID dell'ultimo processo posto in <em>background</em></div></li></ul><p><strong>Uso e manipolazione delle stringhe</strong></p><p>Senza dover fare ricorso a programmi esterni come <strong>sed</strong> e <strong>awk</strong>, e' possibile operare semplici operazioni sulle stringhe direttamente con bash.</p><p>In bash la stringa viene trattata come una variabile, puo' essere quindi richiamata con <em>$nome_variabile</em> o con la sintassi <em>${nome_variabile}</em>. Quest'ultima permette di includere nelle parentesi graffe un <em>modificatore</em> per alterare il contenuto della stringa.</p><p>Gli operatori fondamentali sono 3:</p><ul><li><div><strong>#</strong>  sottrae dall'inizio della stringa</div></li></ul><blockquote><p>VAR="stringa-di-test"echo ${VAR#stringa-}</p></blockquote><p><em>elimina "stringa-" dall'inizio della stringa, restituendo "di-test"</em></p><ul><li><div><strong>% </strong>sottrae alla fine della stringa</div></li></ul><blockquote><p>VAR="stringa-di-test"echo ${VAR%-test}</p></blockquote><p><em>elimina "-test" dalla fine della stringa, restituendo "stringa-di"</em></p><ul><li><div><em><strong>/</strong>  </em>sostituisce una stringa con un'altra (solo la prima occorrenza)</div></li></ul><blockquote><p>VAR="stringa-di-test"echo ${VAR/di/da}</p></blockquote><p><em>restituisce "stringa-da-test"</em></p><p>Nel caso del modificatore <strong>/</strong> e' possibile operare la sostituzione sull'intera stringa utilizzando al suo posto <strong>//</strong>.</p><p>Articolo di riferimento: in <a href="http://www.ukuug.org/events/linux2003/papers/bash_tips/" target="_blank">HTML</a> e in <a href="http://www.ukuug.org/events/linux2003/papers/bash_tips/Bash_tips.pdf" target="_blank">PDF</a></p>